; Supervisor program definition for the Modbus alarm poller.

[program:rozhlas_alarm_poller]
directory=/opt/rozhlas
command=/usr/bin/env bash -lc 'source /etc/rozhlas/rozhlas.env && cd /opt/rozhlas && PYTHON_BIN=${PYTHON_BIN:-python3}; args=(daemons/alarm_poller.py --port "${MODBUS_PORT:-/dev/ttyUSB0}" --baudrate "${MODBUS_BAUDRATE:-57600}" --parity "${MODBUS_PARITY:-N}" --stopbits "${MODBUS_STOPBITS:-1}" --bytesize "${MODBUS_BYTESIZE:-8}" --timeout-ms "${MODBUS_TIMEOUT_MS:-500}" --unit "${MODBUS_UNIT_ID:-1}" --interval "${ALARM_POLL_INTERVAL:-2}" --project-root /opt/rozhlas --artisan-bin "${ARTISAN_BIN:-php}" --artisan-path "${ARTISAN_PATH:-artisan}" --artisan-command "${ALARM_ARTISAN_COMMAND:-alarm:poll}"); [[ -n "${ALARM_POLLER_BACKOFF:-}" ]] && args+=(--backoff "${ALARM_POLLER_BACKOFF}"); exec "$PYTHON_BIN" "${args[@]}"'
autostart=true
autorestart=true
startsecs=3
stopwaitsecs=10
user=rozhlas
redirect_stderr=true
stdout_logfile=/var/log/rozhlas/alarm_poller.log
environment=APP_ENV="production",PYTHONPATH="/opt/rozhlas/python-client/src"
