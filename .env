##############################################################################
# Core Application
##############################################################################
APP_NAME="Bezdrátový rozhlas"
APP_ENV=local
APP_KEY=base64:gUgK2o9fmjWhgx3dKghJTAfUQVW18+oS+ixbk/1hXQQ=
APP_URL=http://127.0.0.1:8001
APP_TIMEZONE=Europe/Prague
LARAVEL_HOST=127.0.0.1
LARAVEL_PORT=8001
PYTHON_BINARY=.venv/bin/python3

##############################################################################
# Localization & Faker
##############################################################################
APP_LOCALE=cs
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=cs_CZ

##############################################################################
# Runtime Modes & Debugging
##############################################################################
APP_DEBUG=true
DEBUGBAR_ENABLED=false
APP_MAINTENANCE_DRIVER=file
APP_MAINTENANCE_STORE=database
BCRYPT_ROUNDS=12

##############################################################################
# Logging
##############################################################################
LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

##############################################################################
# Database
##############################################################################
DB_CONNECTION=sqlite
# DB_HOST=127.0.0.1
# DB_PORT=3306
# DB_DATABASE=laravel
# DB_USERNAME=root
# DB_PASSWORD=

##############################################################################
# Sessions
##############################################################################
SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

##############################################################################
# Cache & Queues
##############################################################################
CACHE_STORE=database
CACHE_PREFIX=
QUEUE_CONNECTION=redis
QUEUE_NAMES=activations-high,default
QUEUE_SLEEP=1
QUEUE_TRIES=1
ALARM_MONITOR_INTERVAL=60

##############################################################################
# Filesystem
##############################################################################
FILESYSTEM_DISK=local

##############################################################################
# Notifications - SMS (GoSMS)
# Uses OAuth client credentials issued in the GoSMS portal.
##############################################################################
SMS_GOSMS_CLIENT_ID=52835_3wm6pqsy70g00kg0ck044ocwgco8cwsssog8wc8c8w0c44goo
SMS_GOSMS_CLIENT_SECRET=38aup3c6yickcg4c0g0wwo808ogsgks0s0g48cg4so8gscco04
SMS_GOSMS_CHANNEL=465684
SMS_GOSMS_SENDER=
# Legacy fallback (deprecated):
# SMS_GOSMS_USERNAME=
# SMS_GOSMS_PASSWORD=

##############################################################################
# Mail & SMTP
##############################################################################
MAIL_MAILER=log
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

##############################################################################
# Broadcast Frontend / Vite
##############################################################################
VITE_APP_NAME="${APP_NAME}"

##############################################################################
# Broadcasting & Mixer
##############################################################################
BROADCAST_CONNECTION=log
#PUSHER_APP_ID=1773855
#PUSHER_APP_KEY=0b053ad8162384c6ea24
#PUSHER_APP_SECRET=5f7d5ac7ce55edd30b0f
#PUSHER_APP_CLUSTER=eu
BROADCAST_AUDIO_ROUTING_ENABLED=true
BROADCAST_MIXER_ENABLED=true
BROADCAST_MIXER_BINARY=./python-client/mixer_control.py
BROADCAST_MIXER_TIMEOUT=10
BROADCAST_MIXER_CARD=2
AUDIO_MIXER_CARD=2
PLAYLIST_PLAYER_BINARY=afplay
PLAYLIST_PLAYER_ARGUMENTS={input}

##############################################################################
# Live Broadcast Defaults
##############################################################################
BROADCAST_LIVE_SOURCE=microphone
BROADCAST_LIVE_ROUTE=1,116,225
BROADCAST_LIVE_ZONES=22
BROADCAST_LIVE_UPDATE_ROUTE=false
BROADCAST_LIVE_TIMEOUT=
BROADCAST_LIVE_VOLUME_GROUPS=inputs,outputs

##############################################################################
# Authentication
##############################################################################
JWT_SECRET=njGugvQllthduM5hO9Xex5H1pfyF2ysOejrYlQfdkbIolqgdzE4H8VNj6Y2aBLw4
BROADCAST_DEFAULT_ROUTE=1,116,225

##############################################################################
# Control Channel (Laravel <-> Python bridge)
##############################################################################
CONTROL_CHANNEL_ENDPOINT=unix://storage/run/jsvv-control.sock
CONTROL_CHANNEL_AUTO_START=true
CONTROL_CHANNEL_STARTUP_TIMEOUT_MS=5000
CONTROL_CHANNEL_DRY_RUN=0

##############################################################################
# JSVV / KPPS Serial Link (distinct from Control Tab RS-485)
# Update port/path to match the KPPS RS-232/USB adapter from the HZS docs.
##############################################################################
# For the EKPV DB9 (RS-232) harness the listener runs on /dev/ttyS0.
JSVV_SEQUENCE_MODE=remote_trigger     # local_stream | remote_trigger
JSVV_PORT=/dev/ttyJSVV_APP
JSVV_BAUDRATE=9600
JSVV_PARITY=N
JSVV_STOPBITS=1
JSVV_BYTESIZE=8
JSVV_TIMEOUT=1.0
JSVV_NETWORK_ID=1
JSVV_SERIAL_FLOWCONTROL=none
JSVV_VYC_ID=1
JSVV_KPPS_ADDRESS=0x0001
JSVV_DEDUP_WINDOW=180
JSVV_DEDUP_CACHE_STORE=database
JSVV_DEDUP_CACHE_TTL=600
JSVV_WEBHOOK=http://127.0.0.1:8001/api/jsvv/events
JSVV_AUDIO_ROOT=storage/app/public
JSVV_REMOTE_DTRX_ENABLED=false
# Optional overrides for JSVV duration estimation
# JSVV_DEFAULT_VERBAL_SECONDS=12
# JSVV_DEFAULT_SIREN_SECONDS=60
# JSVV_DEFAULT_FALLBACK_SECONDS=10
# JSVV_DURATION_CACHE_SECONDS=86400
# JSVV_LOCAL_GAP_SECONDS=0.0
# JSVV_PARSER_LOG=storage/logs/daemons/jsvv_listener.log
# JSVV_LOG_LEVEL=INFO
# JSVV remote trigger (Modbus DTRX mapping)
# JSVV_REMOTE_DTRX_ENABLED=false
# JSVV_REMOTE_DTRX_BASE=0x0000
# JSVV_REMOTE_DTRX_COUNT=24
# JSVV_REMOTE_DTRX_STRIDE=1
# JSVV_REMOTE_DTRX_CLEAR_VALUE=0
# JSVV_REMOTE_DTRX_RESET_AFTER=true
# JSVV_REMOTE_DTRX_COMMAND_START=11
# JSVV_REMOTE_DTRX_COMMAND_COUNT=4
# JSVV_REMOTE_DTRX_PRIORITY_REGISTER=10
# JSVV_REMOTE_DTRX_PRIORITY_CLEAR=0
# Leave remote DTRX base unset so legacy RAM registers (0x0010-0x0014) are used.
# JSVV_REMOTE_DTRX_BASE=
# JSVV_REMOTE_DTRX_COUNT=24
# JSVV_REMOTE_DTRX_STRIDE=1
# JSVV_REMOTE_DTRX_CLEAR_VALUE=0
# JSVV_REMOTE_DTRX_RESET_AFTER=true

##############################################################################
# GSM Listener Daemon
# Handles inbound calls/SMS via GSM modem (separate physical port).
##############################################################################
GSM_ENABLED=false
GSM_WEBHOOK=http://127.0.0.1:8001/api/gsm/events
GSM_TOKEN=
GSM_SERIAL_PORT=/dev/ttyUSB2
GSM_SERIAL_BAUDRATE=115200
GSM_SERIAL_BYTESIZE=8
GSM_SERIAL_PARITY=N
GSM_SERIAL_STOPBITS=1
GSM_SERIAL_TIMEOUT=0.5
GSM_SERIAL_WRITE_TIMEOUT=1
GSM_POLL_INTERVAL=0.2
GSM_GRACEFUL_TIMEOUT=5
GSM_SIGNAL_INTERVAL=30
GSM_AUTO_ANSWER_DELAY_MS=1000
GSM_MAX_RING_ATTEMPTS=6
GSM_SIM_PIN=1234

##############################################################################
# Control Tab Listener (serial link for local control panel)
##############################################################################
CONTROL_TAB_ENABLED=false
CONTROL_TAB_WEBHOOK=http://127.0.0.1:8001/api/control-tab/events
CONTROL_TAB_TOKEN=
CONTROL_TAB_SERIAL_PORT=/dev/ttyUSB1 #/dev/ttyUSB0
CONTROL_TAB_MODBUS_UNIT_ID=1
CONTROL_TAB_SERIAL_BAUDRATE=115200
CONTROL_TAB_SERIAL_BYTESIZE=8
CONTROL_TAB_SERIAL_PARITY=N
CONTROL_TAB_SERIAL_STOPBITS=1
CONTROL_TAB_SERIAL_TIMEOUT=0.2
CONTROL_TAB_SERIAL_WRITE_TIMEOUT=1
CONTROL_TAB_POLL_INTERVAL=0.05
CONTROL_TAB_GRACEFUL_TIMEOUT=5
CONTROL_TAB_RETRY_BACKOFF_MS=250
CONTROL_TAB_DEBUG=1

##############################################################################
# GPIO Buttons (potential-free triggers)
##############################################################################
GPIO_BUTTON_ENABLED=false
GPIO_BUTTON_CHIP=gpiochip2
GPIO_BUTTON_LINE=0
GPIO_BUTTON_ACTIVE_LEVEL=1
GPIO_BUTTON_DEBOUNCE_MS=75
GPIO_BUTTON_RELEASE_DEBOUNCE_MS=75
GPIO_BUTTON_POLL_INTERVAL=0.05
GPIO_BUTTON_COOLDOWN_MS=500
GPIO_BUTTON_ID=1
GPIO_BUTTON_WEBHOOK=http://127.0.0.1:8001/api/control-tab/events
GPIO_BUTTON_SESSION_PREFIX=gpio
GPIO_BUTTON_BACKEND=auto
GPIO_BUTTON_LOG_LEVEL=INFO

##############################################################################
# Modbus / Two-way Communication (per nest requirements)
#/dev/tty.usbserial-AV0K3CPZ  #/dev/ttyUSB0
##############################################################################
MODBUS_PORT=/dev/ttyUSB0
MODBUS_UNIT_ID=55
MODBUS_RS485_GPIO_ENABLE=false
MODBUS_RS485_GPIO_CHIP=/dev/gpiochip0
MODBUS_RS485_GPIO_LINE=16
MODBUS_RS485_GPIO_ACTIVE_HIGH=false
MODBUS_RS485_GPIO_LEAD_SECONDS=0.01
MODBUS_RS485_GPIO_TAIL_SECONDS=0.01
MODBUS_RS485_GPIO_DEBUG=false
MODBUS_RS485_DRIVER_ENABLE=false
MODBUS_RS485_DRIVER_RTS_TX_HIGH=true
MODBUS_RS485_DRIVER_RTS_RX_HIGH=false
MODBUS_RS485_DRIVER_LEAD_SECONDS=0.0002
MODBUS_RS485_DRIVER_TAIL_SECONDS=0.0002

##############################################################################
# Redis
##############################################################################
REDIS_CLIENT=predis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

##############################################################################
# External Services (AWS / S3)
##############################################################################
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false
